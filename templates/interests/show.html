{% extends "user/base.html" %}
{% load static %}
{% load staticfiles %}
{% load customtags %}

{% block extra_js %}
<script>
// These functions live here rather than in the js file because 
// they deal with django variables, which I don't know how to pass
// to the separate js file :( -ds
function getCurrentUserInterests() {
  return {{ user_interests|safe }};
}

function getMainCategories() {
  return {{i_list.children|dumpsjs|safe}};
}

function getIList() {
  return {{all_interests|dumpsjs|safe}};
}

function getIStrings() {
  return "{{all_interests_string}}".split(",");
}
</script>
<script type="text/javascript" src="{% static 'messages/js/typeahead.jquery.js' %}"></script>
<script type="text/javascript" src="{% static 'interests/js/jquery.waypoints.min.js' %}"></script>
{% endblock %}


{% block content %}
{% load customtags %}
<link rel="stylesheet" type="text/css" href="{% static 'interests/css/show.css' %}" />
<div class="row buffer-row">
  <hr class="snak-divider">
</div>
<div class="row interests-row">
  <div class="col-sm-7 lefthalf">
    <div class="well interests-well col-md-12">
      <div id="scrollable-dropdown-menu row">
	<input type="text" placeholder="Search for interests" class="form-control search-box" id="interests-searchbar" onkeypress="return interestEnteredFromSearch(event);">
	<input type="hidden" id="interest-id-searchbox" value="none">
	<input type="hidden" id="interest-name-searchbox" value="none">
	<div class="row">
	  <div id="up-arrow-support"></div>
	  <span class="glyphicon glyphicon-chevron-up pull-right up-arrow"></span>
	</div>
      </div>
      <div class="list-of-interests row" id="list-of-interests">
	<div class="col-md-6" id="interest-list-outside-div">
	  <ul id="scrolling-list-of-interests">
	    {% for interest in i_list.children %} 
            <div id="{{interest.id}}_jump" name="{{interest.name}}" style="hidden: true"></div>
	    {% include "interests/interest_template.html" %}
	    {% endfor %}
	  </ul>
	</div>
	<div id="interest-hover-box" class="col-md-3">
	  <h4 id="interest-tooltip-title">About this interest</h4>
	  <div id="interest-tooltip-div">Hover over an interest to read more about it.</div>
	  <p id="interest-disclaimer">*This may not be a comprehensive list of all the options that Dartmouth offers in this area</p>
	</div>
      </div>
      <div class="row">
	  <span class="glyphicon glyphicon-chevron-down pull-right down-arrow"></span>
      </div>
    </div>
  </div>
  
  <div class="col-sm-4 well rightbar pull-right">
    <ul class="panel-body" id="interest-name-list"></ul>
    <form id="sendinterests" method="POST" action="/interest/update/">
      {% csrf_token %}
      <input type="hidden" name="interest_list" id="to_send_interest_list" value="empty">
      <button class="btn btn-primary" type="submit" id="submit-interests-btn" data-loading-text="Add 3 interests to continue">Save and continue</button>
    </form>
  </div>
  
</div>

<script type ="text/javascript" src="{% static 'interests/js/interests.js' %}"></script>
{% endblock %}
